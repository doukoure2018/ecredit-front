<ng-container *ngIf="demandeIndividuelState$ | async as state">
    <div class="container-scroller">
        <app-menu></app-menu>
        <div class="container-fluid page-body-wrapper">

            <div class="main-panel">
                <div class="content-wrapper">
                    <div class="page-header">
                        <h3 class="page-title"> Liste de demandes </h3>
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="#">Formulaire</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Adhesion Personne Physique</li>
                            </ol>
                        </nav>
                    </div>
                    <div class="row">
                        <div class="col-12 grid-margin">
                            <div class="card">
                                <div class="card-body">
                                    <div class="table-responsive">
                                        <table mat-table [dataSource]="dataSource" matSort
                                            class="table table-hover table-bordered table-striped">
                                            <ng-container matColumnDef="index">
                                                <th mat-header-cell *matHeaderCellDef class="text-center"> # </th>
                                                <td mat-cell *matCellDef="let demande; let i = index"
                                                    class="text-center">
                                                    {{ i + 1 }}
                                                </td>
                                                <!-- Sent Date Column -->
                                                <ng-container matColumnDef="createdAt">
                                                    <th mat-header-cell *matHeaderCellDef mat-sort-header
                                                        class="text-center"> Date </th>
                                                    <td mat-cell *matCellDef="let demande" class="text-center">
                                                        {{ demande.createdAt | date: 'dd/MM/yyyy' }}
                                                    </td>
                                                </ng-container>
                                            </ng-container>
                                            <!-- Message Column -->
                                            <ng-container matColumnDef="nom">
                                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                                    class="text-center"> Nom </th>
                                                <td mat-cell *matCellDef="let demande" class="text-center">
                                                    {{ demande.nom }}
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="prenom">
                                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                                    class="text-center"> Prenom </th>
                                                <td mat-cell *matCellDef="let demande" class="text-center">
                                                    {{ demande.prenom }}
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="telephone">
                                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                                    class="text-center"> Contact </th>
                                                <td mat-cell *matCellDef="let demande" class="text-center">
                                                    {{ demande.telephone }}
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="numeroMembre">
                                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                                    class="text-center"> Numero Membre </th>
                                                <td mat-cell *matCellDef="let demande" class="text-center">
                                                    {{ demande.numeroMembre }}
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="montant">
                                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                                    class="text-center"> Montant </th>
                                                <td mat-cell *matCellDef="let demande" class="text-center">
                                                    {{ demande.montant }}
                                                </td>
                                            </ng-container>
                                            <ng-container matColumnDef="activite">
                                                <th mat-header-cell *matHeaderCellDef mat-sort-header
                                                    class="text-center"> Activit√© </th>
                                                <td mat-cell *matCellDef="let demande" class="text-center">
                                                    {{ demande.activite }}
                                                </td>
                                            </ng-container>
                                            <!-- Status Column -->
                                            <ng-container matColumnDef="statutDemande">
                                                <th mat-header-cell *matHeaderCellDef class="text-center"> Status </th>
                                                <td mat-cell *matCellDef="let demande" class="text-center">
                                                    <label class="badge" [ngClass]="{
                                                  'bg-success': demande.statutDemande === 'APPROVED',
                                                  'bg-primary': demande.statutDemande === 'SELECTED',
                                                  'bg-danger': demande.statutDemande === 'REJECTED'
                                                }">
                                                        {{ demande.statutDemande }}
                                                    </label>
                                                </td>
                                            </ng-container>
                                            <!-- Contact Column -->
                                            <ng-container matColumnDef="action">
                                                <th mat-header-cell *matHeaderCellDef class="text-center"> Action </th>
                                                <td mat-cell *matCellDef="let demande" class="text-center">
                                                    <button type="button" (click)="
                                                  selectDemande(
                                                    demande
                                                  )
                                              " class="btn btn-sm btn-info">
                                                        <i class="fas fa-eye"></i> View
                                                    </button>
                                                </td>
                                            </ng-container>
                                            <!-- Header and Row Definitions -->
                                            <tr mat-header-row *matHeaderRowDef="displayedColumns"
                                                class="table-primary"></tr>
                                            <tr mat-row *matRowDef="let row; columns: displayedColumns;"
                                                class="align-middle"></tr>
                                        </table>
                                        <!-- Paginator -->
                                        <mat-paginator [pageSizeOptions]="[10, 25, 50]"
                                            showFirstLastButtons></mat-paginator>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <app-footer></app-footer>
        </div>
    </div>
</ng-container>